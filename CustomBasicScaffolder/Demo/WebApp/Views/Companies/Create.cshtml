

@model WebApp.Models.Company

@{
    ViewBag.Title = "Create";
}


<!-- MAIN CONTENT -->
<div id="content">
    <!-- quick navigation bar -->
    <div class="row">
        <div class="col-xs-12 col-sm-7 col-md-7 col-lg-4">
            <h1 class="page-title txt-color-blueDark">
                <i class="fa fa-table fa-fw "></i>
                组织架构
                <span>
                    >
                    公司信息
                </span>
            </h1>
        </div>
        <div class="col-xs-12 col-sm-5 col-md-5 col-lg-8">
             
        </div>
    </div>
    <!-- end quick navigation bar -->
    <!-- NEW WIDGET START -->
    <article class="col-sm-12 col-md-12 col-lg-12">

        <!-- Widget ID (each widget will need unique ID)-->
        <div class="jarviswidget" id="wid-id-1" data-widget-colorbutton="false" data-widget-editbutton="false" data-widget-custombutton="false">
            <!-- widget options:
        usage: <div class="jarviswidget" id="wid-id-0" data-widget-editbutton="false">

        data-widget-colorbutton="false"
        data-widget-editbutton="false"
        data-widget-togglebutton="false"
        data-widget-deletebutton="false"
        data-widget-fullscreenbutton="false"
        data-widget-custombutton="false"
        data-widget-collapsed="true"
        data-widget-sortable="false"

        -->
            <header>
                <span class="widget-icon"> <i class="fa fa-edit"></i> </span>
                <h2>Basic Form Elements </h2>

            </header>

            <!-- widget div-->
            <div>

                <!-- widget edit box -->
                <div class="jarviswidget-editbox">
                    <!-- This area used as dropdown edit box -->

                </div>
                <!-- end widget edit box -->
                <!-- widget content -->
                <div class="widget-body ">

                    <form action="/Create/Companies" method="post" class="form-horizontal">
                        @Html.AntiForgeryToken()

 
                            <header>
                                <div class="alert alert-warning no-margin fade in">
                                    <button class="close" data-dismiss="alert">
                                        ×
                                    </button>
                                    <i class="fa-fw fa fa-info"></i>
                                    A combined table effect with all classes mentioned above added to
                                </div>
                                @Html.ValidationSummary(true, "", new { @class = "text-danger" })
                                <hr/>

                            </header>

                           
                            @Html.Partial("EditForm")
                            <div class="form-group">
                                <div class="col-md-offset-2 col-md-10">
                                    <input type="submit" value="Create" class="btn btn-primary" />
                                </div>
                            </div>
                      
                      </form>

                </div>
                <!-- end widget content -->

            </div>
            <!-- end widget div -->

        </div>
        <!-- end widget -->
         

    </article>
    <!-- WIDGET END -->
    
</div>

    @section Scripts {
 
        <script type="text/javascript">

            var companyid = 0;
            var ObjectState = "Added";

            var $departmentstable = {};

            var $employeetable = {};
            $(document).ready(function () {

                $('form').submit(function () {
                    var token = $('[name=__RequestVerificationToken]').val();
                    var serializedForm = $(this).serialize();
                    var actionurl = $(this).attr('action');

                   

                    var newitem = {
                        Departments: departments,
                        Employee: employee,

                        Id: companyid,
                        Name: $('#Name', 'form').val(),
                        Address: $('#Address', 'form').val(),
                        City: $('#City', 'form').val(),
                        Province: $('#Province', 'form').val(),
                        RegisterDate: $('#RegisterDate', 'form').val(),
                        Employees: $('#Employees', 'form').val(),
                        ObjectState: ObjectState
                    };
                    $.ajax({
                        url: actionurl,
                        type: "POST",
                        dataType: "json",
                        contentType: "application/json; charset=utf-8",
                        data: JSON.stringify(newitem),
                        success: function (result) {
                            if (result.success) {
                                self.location = "/Companies/Index";
                            } else {
                                alert(result.err);
                            }

                        },
                        error: function (result) {
                            console.log(result.statusText + result.responseText);
                            alert(result.statusText + result.responseText);
                        }
                    });
                    return false;


                });
            });
        </script>

 
    }
